version: '3.6'
services:
  redis-rdb:
    build:
      context: ./redis-rdb
    container_name: redis-rdb
    ports:
      - '6381:6379'
    volumes:
      - ./redis-rdb/redis.conf:/usr/local/etc/redis/redis.conf
      - redisdb-rdb:/data/db
    networks:
      - queues

  redis-aof:
    build:
      context: ./redis-aof
    container_name: redis-aof
    ports:
      - '6382:6379'
    volumes:
      - ./redis-aof/redis.conf:/usr/local/etc/redis/redis.conf
      - redisdb-aof:/data/db
    networks:
      - queues

  beanstalkd:
    image: schickling/beanstalkd
    container_name: beanstalkd
    ports:
      - '11300:11300'
    volumes:
      - beanstalkd_data:/var/lib/beanstald
    networks:
      - queues

volumes:
  redisdb-rdb: {}
  redisdb-aof: {}
  beanstalkd_data: {}

networks:
  queues:
    driver: bridge
